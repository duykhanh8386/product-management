extends ../../layout/default.pug
include ../../mixins/filterStatus.pug
include ../../mixins/search.pug
include ../../mixins/pagination.pug
include ../../mixins/form-change-multi.pug
include ../../mixins/alert.pug
block main 
  +alert-success(5000)
  h1 Danh sách sản phẩm đã xóa
  .card.mb-3
    .card-header Bộ lọc và Tìm kiếm
      .card-body
        .row 
          .col-6 
            +filter-status(filterStatus)
          .col-6 
            +search(keyword)
  .card.mb-3
    .card-header Danh sách sản phẩm đã xóa
      .card-body
        +form-change-multi(`${prefixAdmin}/products/change-multi?_method=PATCH`)
        table(
          class ="table table-hover table-sm"
          checkbox-multi
        )
          thead
            tr
              th 
                input(type="checkbox" name="checkall")
              th STT
              th Hình ảnh
              th Tiêu đề
              th Giá
              th Vị trí
              th Trạng thái
              th Hành động
              
          tbody
          each item, index in products
            tr
              td 
                input(type="checkbox" name="id" value=item.id)
              td #{index + 1}
              td
                img(
                  src=item.thumbnail,
                  alt=item.title,
                  width="100px",
                  height="auto"
                )
              td #{item.title}
              td #{item.price} $
              td 
                input(
                  type="number"
                  value = item.position 
                  style="width: 60px"
                  min="1"
                  name = "position"
                )
              td
                if(item.status =="active")
                  a(href="javascript:;"
                  button-change-status 
                  data-status=item.status
                  data-id=item.id
                  class="badge bg-success") Hoạt động
                else 
                  a(href="javascript:;" 
                  button-change-status 
                  data-status=item.status
                  data-id=item.id
                  class="badge bg-danger") Dừng hoạt động
              td
                button(class="btn btn-success btn-sm"   data-id = item.id
                button-recover-item
                ) Khôi phục
                button(class="btn btn-danger btn-sm ml-1"
                  data-id = item.id
                button-delete-forever) Xóa vĩnh viễn
                
  +pagination(pagination)
  form(
    action=""
    method="POST"
    id="form-recover-item"
    data-path=`${prefixAdmin}/products/recover-item`
  )
  form(
    action=""
    method="DELETE"
    id="form-delete-forever"
    data-path=`${prefixAdmin}/products/delete-forever`
  )
  script(src="/admin/js/product.js")
